        -:    0:Source:unittest4.c
        -:    0:Graph:unittest4.gcno
        -:    0:Data:unittest4.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:// Testing isGameOver()
        -:    2:
        -:    3:#include <stdio.h>
        -:    4:#include "dominion.h"
        -:    5:#include "dominion_helpers.h"
        -:    6:#include "rngs.h"
        -:    7:#include <string.h>
        -:    8:#include <assert.h>
        -:    9:
        -:   10:int fail = 0;
        -:   11:
        -:   12:// Own assert true function to provide more information than standard C assert
function assertTrue called 4 returned 100% blocks executed 60%
        4:   13:void assertTrue(int a, int b) {
        4:   14:    if (a == b) {
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        4:   15:        printf("TEST: PASSED\n\n");
call    0 returned 100%
        -:   16:    } else {
    #####:   17:        printf("TEST: FAILED\n\n");
call    0 never executed
    #####:   18:        fail++;
        -:   19:    }
        4:   20:}
        -:   21:
function main called 1 returned 100% blocks executed 96%
        1:   22:int main() {
        -:   23:    
        1:   24:    int k[10] = { adventurer, council_room, feast, gardens, mine,
        -:   25:        remodel, smithy, village, baron, great_hall };
        -:   26:    
        1:   27:    int seed = 1000;
        1:   28:    int numPlayer = 2;
        -:   29:    
        -:   30:    struct gameState state;
        -:   31:    
        1:   32:    printf("Testing: isGameOver()\n\n");
call    0 returned 100%
        -:   33:    
        -:   34:    // Clear the game state
        1:   35:    memset(&state, 23, sizeof(struct gameState));
        -:   36:    
        -:   37:    // Initalize Game: 2 players, seed of 1000
        1:   38:    initializeGame(numPlayer, k, seed, &state);
call    0 returned 100%
        -:   39:    
        -:   40:    // Set number of province cards in stack to 0
        1:   41:    printf("Province = 0\n");
call    0 returned 100%
        1:   42:    printf("Game should end since stack is empty\n");
call    0 returned 100%
        1:   43:    state.supplyCount[province] = 0;
        1:   44:    assertTrue(isGameOver(&state), 1);
call    0 returned 100%
call    1 returned 100%
        -:   45:    
        -:   46:    // Set number of province cards in stack to 1
        -:   47:    // and add a supply card for one pile
        1:   48:    printf("Province = 1\n");
call    0 returned 100%
        1:   49:    printf("Game should NOT end since stack is NOT empty\n");
call    0 returned 100%
        1:   50:    state.supplyCount[province] = 1;
        1:   51:    state.supplyCount[2] = 1;
        1:   52:    assertTrue(isGameOver(&state), 0);
call    0 returned 100%
call    1 returned 100%
        -:   53:    
        -:   54:    // Set number of supply count to 0 for 3 piles
        1:   55:    printf("Supply Count = 0 for 3 piles\n");
call    0 returned 100%
        1:   56:    printf("Game should end\n");
call    0 returned 100%
        1:   57:    state.supplyCount[2] = 0;
        1:   58:    state.supplyCount[6] = 0;
        1:   59:    state.supplyCount[20] = 0;
        1:   60:    assertTrue(isGameOver(&state), 1);
call    0 returned 100%
call    1 returned 100%
        -:   61:    
        -:   62:    // Set number of supply count for 3 piles
        1:   63:    printf("Supply Count = 1 for 3 piles\n");
call    0 returned 100%
        1:   64:    printf("Game should NOT end since supply piles are NOT empty\n");
call    0 returned 100%
        1:   65:    state.supplyCount[2] = 1;
        1:   66:    state.supplyCount[6] = 1;
        1:   67:    state.supplyCount[20] = 1;
        1:   68:    assertTrue(isGameOver(&state), 0);
call    0 returned 100%
call    1 returned 100%
        -:   69:    
        1:   70:    if (fail == 0) {
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        1:   71:        printf("PROGRAM TEST SUCCESFULLY COMPLETED\n\n");
call    0 returned 100%
        -:   72:    } else {
    #####:   73:        printf("PROGRAM TEST FAILED\n\n");
call    0 never executed
        -:   74:    }
        -:   75:    
        1:   76:    return 0;
        -:   77:}
